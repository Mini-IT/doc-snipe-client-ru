#miniit #snipe #snipe-clan

## Общая информация

На данный момент кланы используются в единственном проекте - Инстанте. Кланы это сущности, к которым должен поддерживаться одновременный доступ нескольких игроков, включая правку его свойств. Поэтому любые изменения клановой сущности реализуются только через серверные действия, обеспечивающие транзакционность через свой API. Кроме этого, клан (как и чат) является опциональным сервисом, для входа в который клиент должен сделать запрос `clan.login`, прежде чем он будет иметь возможность пользоваться клановым чатом и другими возможностями.

## Запросы

`SnipeApi.Clan.Login` - логин в сервис клана

`SnipeApi.Clan.Last` - получить последние 50 сообщений в клановом чате

`SnipeApi.Clan.Say` - отправить сообщение в клановый чат. Несмотря на то, что клановый чат всегда оперирует строками, в проекте может быть реализована отправка и получение JSON-строки с медиа-сообщениями, например приглашениями на бой, отправкой своих игровых данных итп

`SnipeApi.Clan.Msg` - сообщение от сервера о получении нового сообщения в клановый чат. Серверные действия также могут отправлять сообщения в чат, и в этом случае они помечаются флагом `isSystem`, чтобы отделить их от сообщений игроков. Кроме того, вместе с каждым обычным сообщением присылается инфо игрока, который его отправил.

`SnipeApi.Clan.Get` - получить общие данные своего клана

`SnipeApi.Clan.Info` - получить клановое инфо для указанного клана. Клановое инфо в целом аналогично инфо игрока и используется для тех же целей (только обновляется автоматически на любую клановую транзакцию). Кроме этого этот запрос возвращает массив инфо участников клана.

`SnipeApi.Clan.Search` - поиск клана по полям инфо. Указывается список критериев, например “уровень клана >= 5”, и в ответе будет список кланов, подходящих под эти критерии.