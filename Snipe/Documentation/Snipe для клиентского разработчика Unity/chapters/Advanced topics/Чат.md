#miniit #snipe #snipe-chat

## Общая информация

В некоторых проектах поддерживается общий чат для игроков. Чат разделен на каналы, которые обьявляются в серверном редакторе. В один момент времени игрок может находиться только в одном канале чата. Также через серверный редактор можно обьявлять некоторых игроков модераторами и тогда они смогут накладывать молчанки на любых участников чата, указывая время и причину. Они могут это делать только через игровой клиент, поэтому если планируется использовать игроков в качестве модераторов, то потребуется имплементировать кнопки и окна для бана.

Несмотря на то, что сервис чата всегда оперирует строками, в проекте может быть реализована отправка и получение JSON-строки с медиа-сообщениями, например приглашениями на бой, отправкой своих игровых данных итп.

Для экономии ресурсов, трафика и упрощения логики работы клиента мы как правило реализуем динамический вход/выход в чат - когда окно чата открывается, клиент отсылает `Chat.Join` и наоборот, когда закрывается, отправляет `Chat.Leave`.

## Запросы

`SnipeApi.Chat.Join`  - присоединиться к указанному каналу. Все остальные сообщения требуют, чтобы игрок находился в канале чата.

`SnipeApi.Chat.Leave`  - уйти из текущего канала чата

`SnipeApi.Chat.Last`  - получить последние 50 сообщений чата

`SnipeApi.Chat.Say`  - отправить сообщение в чат

`SnipeApi.Chat.Msg`  - уведомление от сервера о новом сообщении, полученном в текущий канал. Кроме того, вместе с каждым сообщением присылается инфо игрока, который его отправил (тоже самое, что и в лидербордах).

`SnipeApi.Chat.Mute`  - наложить молчанку с указанным сроком и причиной на участника чата. Доступно только модераторам.