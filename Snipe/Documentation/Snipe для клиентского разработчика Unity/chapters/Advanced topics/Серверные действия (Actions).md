#miniit #snipe #snipe-actions

Заметка: В новых проектах действия пробрасываются в TS-скрипты.

Основная масса запросов на сервер, с которыми работает клиент, является кастомной для конкретного проекта. С целью сделать работу с сервером более удобной, каждый из этих запросов имеет свой метод для вызова и колбэк для обработки ответа в `SnipeApi.Action`. Если искомого метода нет, то значит, что вам нужно обновить `SnipeApi`. Кроме этого есть дефолтный метод `SnipeApi.Action.Run()`, над которыми все остальные являются оберткой. В некоторых старых проектах вы можете на него натолкнуться. Его недостатком является то, что все аргументы вызова и ответы нужно будет обрабатывать руками через строковые идентификаторы, что поднимает вероятность ошибок в коде, и колбек придется добавлять вручную.

Часть серверных действий являются дебажными, что обычно видно из префикса `Debug` спереди. Как правило, дебажные методы можно вызвать только если выставлен дебажный флаг в профиле. Что они делают и можно ли ими пользоваться повседневно в конкретном проекте, лучше узнавать заранее, поскольку они только симулируют корректную работу, как правило с ограничениями.

Серверный код действий видно в серверном редакторе в разделе `Entities/Actions`. У каждого действия есть поле `trigger`, это триггер, каким образом сервер его вызывает. Триггер `client.self` означает, что этот код будет вызван с клиента запросом. Остальные типы действий достаточно очевидны, но их рассмотрение выходит за пределы этого документа. Самое главное, что смотреть в серверный код клиентскими программистами не только не возбраняется, но и поощряется, поскольку программист читает код не хуже чем слушает объяснения. Серверный API во-многом схож с клиентским, как и используемые названия модулей и прочего, поэтому разобраться в серверном коде обычно не составляет большого труда. В редких случаях (лучше отложить это, пока у вас не будет достаточного опыта и понимания проекта) клиентский программист может исправить серверный код сам, если видит очевидную ошибку. При этом нужно не забыть сообщить серверному программисту, что были произведены исправления, потому что иначе они могут быть утеряны при последующей заливке серверного кода в БД.