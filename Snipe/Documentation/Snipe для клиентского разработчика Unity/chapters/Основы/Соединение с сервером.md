#miniit #snipe 

Ссылки для работы с сервером (вебсокет):
`dev` - `wss://dev.snipe.dev/wss_11000/`
`live` - `wss://live.snipe.dev/wss_16000/`

UDP точка входа:
`dev` - `dev.snipe.dev` порт `10667` (приоритет), `10666` (старый запасной без проброса айпи)
`live` - `live.snipe.dev` порт `16667` (приоритет), `16666` (старый запасной без проброса айпи)

HTTP точка входа:
`dev` - [`https://dev.snipe.dev/api/v1/request/[requestID]`](https://dev.snipe.dev/api/v1/request/:requestID:)
`live` - [`https://live.snipe.dev/api/v1/request/[requestID]`](https://live.snipe.dev/api/v1/request/:requestID:)

Если в `SnipeConfig`-е задан UDP адрес, клиент в первую очередь пытается установить именно такое соединение. Если UDP соединение установить не удалось, клиент пытается подключиться по WebSocket.

Для инициации подключения следует вызвать
`snipeContext.Communicator.StartCommunicator()`

Для поддержания соединения в активном состоянии, клиент регулярно обменивается с сервером короткими сообщениями (ping-ами). Если в течение 3 секунд сервер не отвечает на пинг, считается, что соединение разорвано. При этом Communicator несколько раз пытается восстановить соединение автоматически. Количество попыток задается следующим образом:
`snipeContext.Communicator.RestoreConnectionAttempts = 10;`

При этом будет вызвано событие
`snipeContext.Communicator.ConnectionFailed` с флагом `will_restore = true`.
Когда попытки закончатся, будет вызвано событие
`snipeContext.Communicator.ConnectionFailed` с флагом `will_restore = false`.

>[!warning]
>Обмен сообщениями с сервером - это асинхронная операция, требующая какого-то времени. Причем по разным причинам на каждое сообщение может понадобиться разное количество времени. Это обязательно нужно учитывать в разработке, чтобы не блокировать UI и не портить впечатление пользователя. Ни в коем случае нельзя рассчитывать на стабильное время обработки любого запроса к серверу через Sleep или подобные вызовы.
