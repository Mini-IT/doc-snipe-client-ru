#miniit #snipe 

–û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ - —É—Ö–æ–¥ –æ—Ç —Å–∏–Ω–≥–ª—Ç–æ–Ω–æ–≤. `SnipeCommunicator` —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∫ –∏–Ω—Å—Ç–∞–Ω—Å –≤ –ø—Ä–æ–µ–∫—Ç–Ω–æ–º –∫–æ–¥–µ. –¢–∞–∫–∂–µ –≤ —Ç–µ–æ—Ä–∏–∏ –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–æ—Ä–æ–≤.

–°—É—Ç—å —Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ –≤ [Beamable Player Centric API](https://docs.beamable.com/docs/player-centric-api-overview)

<aside>
üí° –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Persistent` –∫–ª–∞—Å—Å—ã –∏–∑ –ø—ç–∫—ç–¥–∂–∞ (–æ–±–Ω–æ–≤–∏—Ç—å –ø—ç–∫—ç–¥–∂, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å). —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –±—É–¥–µ—Ç –∫–∏–¥–∞—Ç—å —ç–∫—Å–µ–ø—à–µ–Ω—ã
–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [[Deprecated] **Persistent package**](../../Mini%20IT%20Unity%20Framework%20b327ebb3c8184edfbc738410a94e5f1f/%5BDeprecated%5D%20Persistent%20package%208f60d1d8d30b4f048f92f74cadfbe638.md)

</aside>

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (–≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –±–µ–∑ SnipeApi)

```jsx
_snipeContext = SnipeContext.Default;        // Instance name == ""
// –∏–ª–∏
_snipeContext = SnipeContext.GetInstance();  // Instance name == ""
// –∏–ª–∏
_snipeContext = SnipeContext.GetInstance("Custom Instance Name");
```

### SnipeApiService –∏ SnipeApiContext

–í–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ `SnipeApi` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω—Å—Ç–∞–Ω—Å—ã –∫–ª–∞—Å—Å–∞ `SnipeApiService`, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ Snipe Api Downloader.

–°–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –±—É–¥–µ—Ç —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª–∞—Å—Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ `SnipeApiContext`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ Api, —Ç–∞–±–ª–∏—Ü–∞–º –∏ –ø—Ä.

```jsx
_snipeContext = SnipeApiContext.Default;        // Instance name == ""
// –∏–ª–∏
_snipeContext = SnipeApiContext.GetInstance();  // Instance name == ""
// –∏–ª–∏
_snipeContext = SnipeApiContext.GetInstance("Custom Instance Name");

// –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
if (_snipeContext.Tables.Loaded)
{
	_snipeContext.Api.UserAttr.GetAll(OnUserDataUpdated);
}
```

<aside>
üí° –ï—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –±—ã–ª —Ñ–∞–π–ª `SnipeApi.cs`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–ª–∞—Å—Å-–æ–±–µ—Ä—Ç–∫–∞.

</aside>

### –ë–∞—Ç—á–∏–Ω–≥ —Å—Ç–∞—Ä—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

–í–æ –º–Ω–æ–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ. –ù–∞–ø—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–ª—è —Ç–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ –Ω–µ –¥–æ–∂–∏–¥–∞—Ç—å—Å—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∞ ‚Äú—Å–∫–ª–µ–∏—Ç—å‚Äù –∏—Ö —Å –∑–∞–ø—Ä–æ—Å–æ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

–î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `LoginRequested` 

```csharp
_snipeContext.Auth.LoginRequested += OnLoginRequested;

private void OnLoginRequested()
{
	// Generate requests that should be batched with the login request
	_snipeContext.Api.Vars.GetAll();
	_snipeContext.Api.UserAttr.GetAll(OnUserDataUpdated);
}

private void OnUserDataUpdated(string errorCode, UserAttributes data)
{
//...
}
```