весь код инициализации по максимуму засунуть в пэкэдж - сделать некий Context Controller - черный ящик, с которым будет общаться проектный код, не залезая в lowlevel

"Черный ящик" получает при инициализации всё необходимое для коннекта и логина и дальше работает полностью автономно

конфиг - автоматизировать заполнение, но оставить возможность для ручной подмены для дебага

## ISnipeContextReference
В старом коде (в т.ч. в пэкэджах) активно используется интерфейс `ISnipeContextReference` - контейнер контекста с определенным ID. Это инструмент, позволяющий прокинуть зависимость еще до создания самого контекста.
`SnipeManager` - единая точка для получения доступа к контекстам и таблицам. 
	- Требуется, чтобы контексты создавались только через этот менеджер
	- Сделать так, чтобы напрямую без менеджера контекст создать было нельзя (в v7, наоборот, требуется создавать контексты в проектном коде и самому следить за их жизненным циклом и ссылками) - прямое противоречие
Т.к. SnipeManager управляет вообще всеми контекстами, то для обращения к какому-то конкретному контексту __всегда__ требуется указывать его ID, а вообще-то проектный код не должно заботить, какие там вообще бывают айдишники. Напрашивается выделение для этой задачи отдельного сервиса, который будет посредником между проектным кодом и SnipeManager, который нужно будет реализовывать практически одинаково в каждом проекте. А это уже выглядит как то, что должно быть вынесено в пакет. В итоге это плохое решение.
Дополнительную сложность добавляет разнообразие использования контекстов с разными ID в разных проектах.
- В большинстве проектов контекст всего один и он живёт всю сессию.
- В проектах, где можно восстановить прогресс через логин в ФБ, контекст уничтожается и создаётся новый с тем же ID (в v8 такое запрещено), чтобы открыть новое соединение и залогиниться в другой аккаунт.
- В Nutaku (и/или Steam?) контексты используются более интенсивно для имитации другого девайса при привязке аккаунта - костыль на клиенте для работы с костылём на сервере

## Не уничтожать контексты
Для релогина нужно разорвать соединение и подключиться заново, создав таким образом на сервере новую сессию. В старых версиях для этого мы полностью уничтожаем контекст и создаём новый. Проблема в том, что при этом старые ссылки в проектном коде и в пакетах становятся невалидными (NullRef). Поэтому требуется либо обновить все зависимости в уже работающих сервисах, либо пересоздать целиком сами сервисы, что по цепочке порождает ту же проблему - теперь уже ссылки на эти сервисы требуется обновить в третьих местах. Это сложная задача, за которой сложно уследить и ничего не упустить и где постоянно всплывают ошибки.
В качестве решения в v8 контексты не уничтожаются. Ссылка всегда остаётся валидной. За этим следит SnipeManager. Но такой подход полностью меняет процесс релогина, что затрагивает код как проектов, таки пэкэджей, так и самого пакета снайпа. Код проекта и пэкэджей при этом должен очень сильно упроститься и будет меньше мест, где потенциально может что-то сломаться.
С одной стороны, т.к. контекст теперь не может быть уничтожен, то это сильно упрощает базовое взаимодействие с ним. Но с другой стороны, подсистема авторизации тоже является частью контекста, а при релогине почти всё, что касается userID нужно очистить и выполнить все стартовые процедуры заново.
