## Основные задачи
- [ ] [Черный ящик](Subtasks/Черный%20ящик.md)
	- [ ] конфиг - автоматизировать заполнение, но оставить возможность для ручной подмены для дебага
	- [ ] ? подмена параметров для коннекта в рантайме для реконнекта к другому серверу при проблемах
	- [ ] Проблемы релогина в другой аккаунт
		- [ ] [Не удалять контекст для релогина - сделать метод Reset, чтобы старые ссылки и подписки на события остались валидными](Subtasks/Context%20Reset.md)
		- [ ] запрос девайс ид для auth.connect. (см ниже)
		- [ ] добавить метод для чистки внутреннего логина-токена, чтобы можно было перелогиниться в другой акк после auth.connect
- [x] + [SnipeAPI as extension](Subtasks/SnipeAPI%20as%20extension.md)
	- [ ] Инструкция для генерации на стороне сервера
- [x] +/- ConnectionFailed разделить на 2 события - избавиться от флага will_restore - или вообще избавиться от события окончательного дисконнекта и сделать бесконечные ретраи (с увеличивающимся кулдауном до минуты например)
- [x] + Отделить таблицы от контекстов
- [x] + избавиться от SnipeObject
	- [x] избавиться от кастомной реализации JSON
- [ ] [интерфейс и сервис(ы) для получения внешних айдишников юзеров (amazon, steam)](Subtasks/External%20UserID%20providers.md) 
	- [ ] напрямую связано с IAP причем в обе стороны 
- [x] [v8 - поддержание на уровне либы стейта клиента - в очереди/в руме/дефолтный](https://app.asana.com/1/1180656739323347/project/1185654335370062/task/1209999840347501?focus=true)


автоматизировать запрос девайс ида для auth.connect. сейчас приходится не забыть вызывать вот такую матрёшку:
```csharp
var devIdBinding = _snipe.Context.Auth.GetBinding<DeviceIdBinding>();
var facebookBinding = _snipe.Context.Auth.GetBinding<FacebookBinding>();
devIdBinding.Fetcher.Fetch(false, deviceID =>
	{
		facebookBinding.Connect(devIdBinding, (binding, errorCode) =>
		{
			//...
		});
	}); 
```

  
## Дополнительные
- [ ] +/- в аналитику всю инфу о текущем соединении (не только версию пакта, но и текущую реализацию транспортов и прочую полезную инфу)
- [ ] Разобраться, почему требуется PreloadTables
- [ ] ?? snipeContext.Config.IsDev - добавить флаг или геттер ???? хотя есть snipeContext.Config.Project.Mode == SnipeProjectMode.Dev
- [ ] система диагностики вместо прямых логов (тикет [умное сокращение числа базовых ошибок в коннекторе в амплитуду](https://app.asana.com/0/1185654335370062/1209555003361908/f))
  


